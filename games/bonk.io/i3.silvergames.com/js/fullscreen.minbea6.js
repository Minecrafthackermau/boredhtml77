var x=0;var y=0;var isFullscreen=false;var fullscreen_type=false;function initFullscreen(){$(document).keyup(function(a){if(a.keyCode===27){if(isFullscreen){cFull()}}});fullscreen_type=$("#game_embed").data("fullscreen");$("#close_button").bind("click",function(){cFull()});$("#play_game_fullscreen").show()}function oFull(){window.location.hash="#fullscreen";if(fullscreen_type==="full"){oFull_full()}else{if(fullscreen_type==="ratio"){oFull_ratio()}}}function oFull_full(){isFullscreen=true;if(x===0){x=$("#game_embed").width();y=$("#game_embed").height()}$("#close_button").show();$("#game_embed").css({top:"0px",left:"0px",width:"100%",height:"100%"});$("#game_embed").css({position:"fixed",zIndex:10,backgroundColor:"#000"});$("#swf").width("100%").height("100%");$('#game_embed div[style^="visib"]').remove();$("#game_embed").show()}function oFull_ratio(){isFullscreen=true;var a=$(window).width()/$(window).height();if(x===0){x=$("#game_embed").width();y=$("#game_embed").height()}var b=x/y;$("#close_button").show();$("#game_embed").css({top:"0px",left:"0px",width:"100%",height:"100%"});$("#game_embed").css({position:"fixed",zIndex:20,backgroundColor:"#000"});if(b>a){$("#swf").width("100%").height(Math.round($(window).width()/b)+"px")}else{$("#swf").height("100%").width(Math.round($(window).height()*b)+"px")}$('#game_embed div[style^="visib"]').remove();$("#game_embed").show()}function cFull(){isFullscreen=false;window.location.hash="";$("#close_button").hide();$("#swf").width("100%").height("100%");$("#game_embed").width(x+"px").height(y+"px").css("position","relative")}window.onhashchange=function(){if(!isFullscreen&&window.location.hash==="#fullscreen"){oFull()}else{if(isFullscreen&&window.location.hash!=="#fullscreen"){cFull()}}};